"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkadhocracy_plus"] = self["webpackChunkadhocracy_plus"] || []).push([["captcheck"],{

/***/ "./apps/captcha/assets/captcheck.js":
/*!******************************************!*\
  !*** ./apps/captcha/assets/captcheck.js ***!
  \******************************************/
/***/ (function() {

eval("\n\n/* based on https://source.netsyms.com/Netsyms/Captcheck/src/branch/master/captcheck.js */\n/* Copyright (C) 2017-2019 Netsyms Technologies.\n/* Copyright (C) 2020 Liquid Democracy e.V.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\n the Software, and to permit persons to whom the Software is furnished to do so,\n subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\n FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\nNETSYMS TECHNOLOGIES BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,\nWHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nExcept as contained in this notice, the name and other identifying marks of\nNetsyms Technologies shall not be used in advertising or otherwise to promote\nthe sale, use or other dealings in this Software without prior written\nauthorization from Netsyms Technologies.\n*/\n\n/* global django */\nvar ariaLabelImage = django.gettext('Click for image-based question');\nvar ariaLabelText = django.gettext('Click for text-based question');\nvar textImageMode = '&gt; ' + django.gettext('Image mode');\nvar textTextMode = '&gt; ' + django.gettext('Text mode');\nwindow.onload = function () {\n  function chooseAnswer(idp, ans, session, combinedAnswerId) {\n    var inputField = document.getElementById(combinedAnswerId);\n    inputField.value = ans + ':' + session;\n    var box = document.getElementById('captcheck_' + idp + '_answer_' + ans);\n    if (box) {\n      box.checked = true;\n    }\n  }\n  function clearAnswer(idp, combinedAnswerId) {\n    var inputField = document.getElementById(combinedAnswerId);\n    inputField.value = '';\n    var imgA = document.getElementById('captcheck_' + idp + '_answer_images');\n    imgA.childNodes.forEach(function (e) {\n      e.firstElementChild.checked = false;\n    });\n  }\n  function switchMode(idp, session, combinedAnswerId) {\n    var switchLabel = document.getElementById('captcheck_' + idp + '_alt_question_button');\n    var imgQ = document.getElementById('captcheck_' + idp + '_question_image');\n    var accQ = document.getElementById('captcheck_' + idp + '_question_access');\n    var imgA = document.getElementById('captcheck_' + idp + '_answer_images');\n    var accA = document.getElementById('captcheck_' + idp + '_answer_access');\n    clearAnswer(idp, combinedAnswerId);\n    if (switchLabel.innerHTML === textTextMode) {\n      switchLabel.setAttribute('aria-label', ariaLabelImage);\n      switchLabel.innerHTML = textImageMode;\n      imgQ.style.display = 'none';\n      accQ.style.display = 'initial';\n      imgA.style.display = 'none';\n      accA.style.display = 'initial';\n      accA.innerHTML = \"<input id='captcheck_\" + idp + \"_question_access-answer' type='text' name='captcheck_selected_answer' aria-label='Type your answer here.' autocomplete='off' autofill='off'/>\";\n      accA.firstElementChild.addEventListener('input', function (ev) {\n        ev.preventDefault();\n        chooseAnswer(idp, this.value, session, combinedAnswerId);\n      });\n    } else {\n      switchLabel.innerHTML = textTextMode;\n      imgQ.style.display = 'initial';\n      accQ.style.display = 'none';\n      imgA.style.display = 'initial';\n      accA.style.display = 'none';\n      accA.innerHTML = '';\n    }\n  }\n\n  /* Loop over all the CAPTCHA containers on the page, setting up a different CAPTCHA in each */\n  Array.prototype.forEach.call(document.getElementsByClassName('captcheck_container'), function (container) {\n    var apiUrl = container.getAttribute('data-api_url');\n    var combinedAnswerId = container.getAttribute('combined_answer_id');\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', apiUrl + '?action=new', true);\n    xhr.onreadystatechange = function () {\n      if (this.readyState === 4) {\n        var status = this.status;\n        var json = this.responseText;\n        /* Prevent rare bug where two CAPTCHAs appear in one container */\n        if (container.innerHTML.trim() !== '') {\n          return;\n        }\n        /* Create captcha div */\n        var captcha = document.createElement('div');\n        captcha.setAttribute('class', 'captcheck_box');\n        container.appendChild(captcha);\n        if (status === 200) {\n          var data = JSON.parse(json);\n          // ID prefix to use for this instance\n          var idp = data.id_prefix;\n          /* Create answer buttons */\n          var answers = \"<div class='captcheck_answer_images' id='captcheck_\" + idp + \"_answer_images'>\";\n          for (var i = 0, len = data.answers.length; i < len; i++) {\n            var src = apiUrl + '?action=img&s=' + data.session + '&c=' + data.answers[i];\n            answers += \"<a class='captcheck_answer_label' href='' data-prefix='\" + idp + \"' data-answer='\" + data.answers[i] + \"' tabindex='0' aria-role='button'>\" + \"<input id='captcheck_\" + idp + '_answer_' + data.answers[i] + \"' aria-labelledby='captcheck_\" + idp + \"_question_image' type='radio' name='captcheck_selected_answer' value='\" + data.answers[i] + \"' data-prefix='\" + idp + \"' data-answer='\" + data.answers[i] + \"' />\" + \"<img src='\" + src + \"' data-prefix='\" + idp + \"' data-answer='\" + data.answers[i] + \"'/></a>\";\n          }\n          answers += '</div>';\n          var answerDiv = document.createElement('div');\n          answerDiv.innerHTML = answers + \"<div class='captcheck_answer_access' id='captcheck_\" + idp + \"_answer_access'></div>\";\n          /* Create question */\n          var questionDiv = document.createElement('div');\n          questionDiv.setAttribute('class', 'captcheck_label_message');\n          questionDiv.setAttribute('id', 'captcheck_' + idp + '_label_message');\n          questionDiv.innerHTML = \"<label class='captcheck_question_image' id='captcheck_\" + idp + \"_question_image' tabindex='0'>\" + data.question_i + '</label>' + \"<label class='captcheck_question_access' id='captcheck_\" + idp + \"_question_access' tabindex='0'>\" + data.question_a + '</label>' + \"<a href='' class='captcheck_alt_question_button' data-prefix='\" + idp + \"' id='captcheck_\" + idp + \"_alt_question_button' aria-role='button' tabindex='0' aria-label='\" + ariaLabelText + \"'>\" + textTextMode + '</a>';\n\n          /* Add question and answers */\n          captcha.appendChild(questionDiv);\n          captcha.appendChild(answerDiv);\n\n          /* Add hidden session ID element */\n          var skeyInput = document.createElement('span');\n          skeyInput.innerHTML = \"<input type='hidden' name='captcheck_session_code' value='\" + data.session + \"' />\";\n          captcha.appendChild(skeyInput);\n          var answerButtons = document.querySelectorAll('.captcheck_answer_label[data-prefix=\"' + idp + '\"]');\n          for (var k = 0; k < answerButtons.length; k++) {\n            answerButtons[k].addEventListener('click', function (ev) {\n              chooseAnswer(ev.target.getAttribute('data-prefix'), ev.target.getAttribute('data-answer'), data.session, combinedAnswerId);\n              ev.preventDefault();\n            });\n            answerButtons[k].addEventListener('keydown', function (ev) {\n              if (ev.key === 'Enter' || ev.which === 13 || ev.keyCode === 13 || ev.key === ' ' || ev.which === 32 || ev.keyCode === 32) {\n                chooseAnswer(ev.target.getAttribute('data-prefix'), ev.target.getAttribute('data-answer'), data.session, combinedAnswerId);\n                ev.preventDefault();\n              }\n            });\n          }\n          document.querySelector('.captcheck_alt_question_button[data-prefix=\"' + idp + '\"]').addEventListener('click', function (ev) {\n            ev.preventDefault();\n            switchMode(ev.target.getAttribute('data-prefix'), data.session, combinedAnswerId);\n          });\n          document.querySelector('.captcheck_alt_question_button[data-prefix=\"' + idp + '\"]').addEventListener('keydown', function (ev) {\n            if (ev.key === 'Enter' || ev.which === 13 || ev.keyCode === 13 || ev.key === ' ' || ev.which === 32 || ev.keyCode === 32) {\n              ev.preventDefault();\n              switchMode(ev.target.getAttribute('data-prefix'), data.session, combinedAnswerId);\n            }\n          });\n        } else {\n          /* Add error message */\n          captcha.innerHTML = \"<span class='captcheck_error_message'>There was a problem loading the CAPTCHA.</span>\";\n        }\n      }\n    };\n    xhr.send();\n  });\n};\n\n//# sourceURL=webpack://adhocracy-plus/./apps/captcha/assets/captcheck.js?");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ var __webpack_exec__ = function(moduleId) { return __webpack_require__(__webpack_require__.s = moduleId); }
/******/ var __webpack_exports__ = (__webpack_exec__("./apps/captcha/assets/captcheck.js"));
/******/ }
]);