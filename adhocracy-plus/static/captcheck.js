"use strict";(self.webpackChunkadhocracy_plus=self.webpackChunkadhocracy_plus||[]).push([[245],{758:function(){var e=django.gettext("Click for image-based question"),t=django.gettext("Click for text-based question"),a="&gt; "+django.gettext("Image mode"),n="&gt; "+django.gettext("Text mode");window.onload=function(){function c(e,t,a,n){document.getElementById(n).value=t+":"+a;var c=document.getElementById("captcheck_"+e+"_answer_"+t);c&&(c.checked=!0)}function s(t,s,i){var r=document.getElementById("captcheck_"+t+"_alt_question_button"),d=document.getElementById("captcheck_"+t+"_question_image"),l=document.getElementById("captcheck_"+t+"_question_access"),o=document.getElementById("captcheck_"+t+"_answer_images"),u=document.getElementById("captcheck_"+t+"_answer_access");!function(e,t){document.getElementById(t).value="",document.getElementById("captcheck_"+e+"_answer_images").childNodes.forEach((function(e){e.firstElementChild.checked=!1}))}(t,i),r.innerHTML===n?(r.setAttribute("aria-label",e),r.innerHTML=a,d.style.display="none",l.style.display="initial",o.style.display="none",u.style.display="initial",u.innerHTML="<input id='captcheck_"+t+"_question_access-answer' type='text' name='captcheck_selected_answer' aria-label='Type your answer here.' autocomplete='off' autofill='off'/>",u.firstElementChild.addEventListener("input",(function(e){e.preventDefault(),c(t,this.value,s,i)}))):(r.innerHTML=n,d.style.display="initial",l.style.display="none",o.style.display="initial",u.style.display="none",u.innerHTML="")}Array.prototype.forEach.call(document.getElementsByClassName("captcheck_container"),(function(e){var a=e.getAttribute("data-api_url"),i=e.getAttribute("combined_answer_id"),r=new XMLHttpRequest;r.open("GET",a+"?action=new",!0),r.onreadystatechange=function(){if(4===this.readyState){var r=this.status,d=this.responseText;if(""!==e.innerHTML.trim())return;var l=document.createElement("div");if(l.setAttribute("class","captcheck_box"),e.appendChild(l),200===r){for(var o=JSON.parse(d),u=o.id_prefix,_="<div class='captcheck_answer_images' id='captcheck_"+u+"_answer_images'>",p=0,h=o.answers.length;p<h;p++){var m=a+"?action=img&s="+o.session+"&c="+o.answers[p];_+="<a class='captcheck_answer_label' href='' data-prefix='"+u+"' data-answer='"+o.answers[p]+"' tabindex='0' aria-role='button'><input id='captcheck_"+u+"_answer_"+o.answers[p]+"' aria-labelledby='captcheck_"+u+"_question_image' type='radio' name='captcheck_selected_answer' value='"+o.answers[p]+"' data-prefix='"+u+"' data-answer='"+o.answers[p]+"' /><img src='"+m+"' data-prefix='"+u+"' data-answer='"+o.answers[p]+"'/></a>"}_+="</div>";var g=document.createElement("div");g.innerHTML=_+"<div class='captcheck_answer_access' id='captcheck_"+u+"_answer_access'></div>";var k=document.createElement("div");k.setAttribute("class","captcheck_label_message"),k.setAttribute("id","captcheck_"+u+"_label_message"),k.innerHTML="<label class='captcheck_question_image' id='captcheck_"+u+"_question_image' tabindex='0'>"+o.question_i+"</label><label class='captcheck_question_access' id='captcheck_"+u+"_question_access' tabindex='0'>"+o.question_a+"</label><a href='' class='captcheck_alt_question_button' data-prefix='"+u+"' id='captcheck_"+u+"_alt_question_button' aria-role='button' tabindex='0' aria-label='"+t+"'>"+n+"</a>",l.appendChild(k),l.appendChild(g);var f=document.createElement("span");f.innerHTML="<input type='hidden' name='captcheck_session_code' value='"+o.session+"' />",l.appendChild(f);for(var y=document.querySelectorAll('.captcheck_answer_label[data-prefix="'+u+'"]'),b=0;b<y.length;b++)y[b].addEventListener("click",(function(e){c(e.target.getAttribute("data-prefix"),e.target.getAttribute("data-answer"),o.session,i),e.preventDefault()})),y[b].addEventListener("keydown",(function(e){"Enter"!==e.key&&13!==e.which&&13!==e.keyCode&&" "!==e.key&&32!==e.which&&32!==e.keyCode||(c(e.target.getAttribute("data-prefix"),e.target.getAttribute("data-answer"),o.session,i),e.preventDefault())}));document.querySelector('.captcheck_alt_question_button[data-prefix="'+u+'"]').addEventListener("click",(function(e){e.preventDefault(),s(e.target.getAttribute("data-prefix"),o.session,i)})),document.querySelector('.captcheck_alt_question_button[data-prefix="'+u+'"]').addEventListener("keydown",(function(e){"Enter"!==e.key&&13!==e.which&&13!==e.keyCode&&" "!==e.key&&32!==e.which&&32!==e.keyCode||(e.preventDefault(),s(e.target.getAttribute("data-prefix"),o.session,i))}))}else l.innerHTML="<span class='captcheck_error_message'>There was a problem loading the CAPTCHA.</span>"}},r.send()}))}}},function(e){var t;t=758,e(e.s=t)}]);
//# sourceMappingURL=captcheck.js.map