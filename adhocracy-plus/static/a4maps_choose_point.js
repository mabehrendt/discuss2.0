"use strict";(self.webpackChunkadhocracy_plus=self.webpackChunkadhocracy_plus||[]).push([[13],{6047:function(t,n,a){var o=a(5825),e=a(8039);function i(t,n,a,o,e,i,c){var g=n.icon({iconUrl:"/static/images/map_pin_default.svg",shadowUrl:"/static/images/map_shadow_01.svg",iconSize:[30,36],iconAnchor:[15,36],shadowSize:[40,54],shadowAnchor:[20,54],popupAnchor:[0,-45]}),u=n.marker(a,{draggable:!0,icon:g}).addTo(i);return u.on("dragend",(function(){var n=!1;e.getLayers().forEach((function(a){if(function(t,n){var a=t.getLatLng().lat,o=t.getLatLng().lng,e=!1;return r(n.getLatLngs()).forEach((function(t){var n=t[0].lat,i=t[0].lng,r=t[1].lat,c=t[1].lng;i>o!=c>o&&a<(r-n)*(o-i)/(c-i)+n&&(e=!e)})),e}(u,a)){n=!0,o=u.getLatLng();var e=u.toGeoJSON();t("#id_"+c).val(JSON.stringify(e)),t("#id_"+c).trigger("change")}})),n||u.setLatLng(o)})),u}function r(t){var n=[];if(t.length)if("lat"in t[0])for(var a=0,o=t.length-1;a<t.length;o=a++)n.push([t[a],t[o]]);else t.forEach((function(t){r(t).forEach((function(t){n.push(t)}))}));return n}function c(){var t=window.L;o('[data-map="choose_point"]').each((function(n,a){var r,c=a.getAttribute("data-name"),g=JSON.parse(a.getAttribute("data-polygon")),u=JSON.parse(a.getAttribute("data-point")),s=(0,e.createMap)(t,a,{baseUrl:a.getAttribute("data-baseurl"),useVectorMap:a.getAttribute("data-usevectormap"),attribution:a.getAttribute("data-attribution"),mapboxToken:a.getAttribute("data-mapbox-token"),omtToken:a.getAttribute("data-omt-token"),dragging:!0,scrollWheelZoom:!1,zoomControl:!1}),d=t.geoJson(g,{style:{color:"#0076ae",weight:2,opacity:1,fillOpacity:.2}}).addTo(s);s.fitBounds(d.getBounds()),s.options.minZoom=s.getZoom(),t.control.zoom({position:"topleft"}).addTo(s),u&&t.geoJson(u,{pointToLayer:function(n,a){return r=i(o,t,a,a,d,s,c)}}),d.on("click",(function(n){if(void 0===r){var a=n.latlng,e=(r=i(o,t,n.latlng,a,d,s,c)).toGeoJSON();o("#id_"+c).val(JSON.stringify(e)),o("#id_"+c).trigger("change")}})),o("#id_"+c).on("change",(function(n){if(this.value){var a=t.geoJSON(JSON.parse(this.value)).getLayers()[0].getLatLng();void 0===r?r=i(o,t,a,null,d,s,c):r.setLatLng(a)}}))}))}document.addEventListener("DOMContentLoaded",c,!1),document.addEventListener("a4.embed.ready",c,!1)},7212:function(){},6710:function(){}},function(t){var n=function(n){return t(t.s=n)};n(7212),n(6710),n(6047)}]);
//# sourceMappingURL=a4maps_choose_point.js.map